[![oclif](https://img.shields.io/badge/cli-oclif-brightgreen.svg)](https://oclif.io)
[![Version](https://img.shields.io/npm/v/@Gamicacloud/cli.svg)](https://www.npmjs.org/package/@Gamicacloud/cli)
[![Downloads/week](https://img.shields.io/npm/dw/@Gamicacloud/cli.svg)](https://www.npmjs.org/package/@Gamicacloud/cli)
[![License](https://img.shields.io/npm/l/@Gamicacloud/cli.svg)](https://github.com/Gamicacloud/cli/blob/master/package.json)

# Gamicacloud Command Line Interface (CLI)

In a recent [report](https://venturebeat.com/2021/12/09/report-75-of-devs-indicate-that-participating-in-api-economy-is-top-priority/) 75% of developers indicate that participating in API economy is ‘top priority’. Gamicacloud is an unified API development, fundraising, and ownership economy platform.  It provides services, libraries, tools, and frameworks for developing totally open multi-tenant, serverless cloud services with integrated multi-tenant billing, crowdfunding, and ownership economy constructs.  This will allow the developers to just concentrate on developing code related to their domain, leaving the rest to the Gamicacloud platform and services. This model has the potential to disrupt both the software and venture investment industries and making the API developers rich and owners of their own destiny and unicorn startups.

Gamicacloud CLI accelerates the building of modern multi-tenant serverless SaaS APIs. The CLI applies the design-first paradigm and implements the best practices for designing GraphQL APIs using public cloud serverless and infrastructure as code technologies. The CLI takes a [GraphQL API](https://graphql.org/) [schema](https://graphql.org/learn/schema/) that has been augmented with Gamicacloud directives and creates [infrastructure as code (IaC)](https://acloudguru.com/blog/engineering/cloudformation-terraform-or-cdk-guide-to-iac-on-aws), mock lambdas, tests, and scaffolding for genuine lambdas that include business logic and database requests. It makes use of [AWS CDK](https://aws.amazon.com/cdk/) for IaC. It now only supports AWS, TypeScript and GraphQL, but future versions will also support Azure and Google Cloud, OpenAPI and other languages as well.

![CLI Flow](img/cli.png "CLI Diagram")


The generated serverless SaaS API project supports multi-tenant usage based billing and monetering and is closely integrated with the [Gamicacloud portal](https://www.Gamicacloud.com). The developer just needs to write the specific code required by the Multi-Tenant SaaS project. This greatly reduces custom developer coding and increases speed to market. GraphQL and Open REST APIs can be built by using the Gamicacloud CLI. The APIs may use Graph or Relational databases, etc.

We have also published detailed [Tutorials](https://github.com/Gamicacloud-modern-global-apps/full-stack-serverless-cdk) to help you to learn AWS CDK. 

Before getting started you need to install the following packages and libraries:

1. Install [Node.js](https://nodejs.org/en/)
2. Install [AWS CLI Version 2.x](https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-welcome.html)
3. Install [AWS CDK Version 2](https://docs.aws.amazon.com/cdk/latest/guide/work-with-cdk-v2.html)
4. Install Globally [TypeScript](https://www.typescriptlang.org/download)

Before starting your API project learn to develop APIs using this [bootcamp](https://github.com/Gamicacloud/bootcamp-2021#part-3-introduction-to-serverless-and-cloud-computing-using-cdk) and [learning API repo](https://github.com/Gamicacloud-modern-global-apps/api-design-prototype-testing)

The first step in developing a GraphQL [schema](https://dgraph.io/blog/post/designing-graphql-schemas/) for your APIs. Once you have built your GraphQL schema and enhanced it with Gamicacloud directives, we will now use this CLI to develop the serverless cloud APIs.

The code generated by the CLI will have parts:

1. Code will be managed and updated by the CLI. As we add and update the API schema, we will update the generated code using the CLI.
2. Code that is editable by the API developer and is contained in the editiable_src directory. This code code contains the buisiness logic and is edited and updated by the developer.

Note: The developer can also modify and add the IaC CDK code by using [CDK aspects](https://docs.aws.amazon.com/cdk/latest/guide/aspects.html).

Now Globally Install Gamicacloud CLI:

npm install @Gamicacloud/cli -g 

<!-- toc -->
* [Gamicacloud Command Line Interface](#Gamicacloud-command-line-interface)
* [Usage](#usage)
* [Commands](#commands)
<!-- tocstop -->

# Usage

<!-- usage -->
```sh-session
$ npm install -g @Gamicacloud/cli
$ Gamicacloud COMMAND
running command...
$ Gamicacloud (-v|--version|version)
@Gamicacloud/cli/0.0.3 win32-x64 node-v14.16.1
$ Gamicacloud --help [COMMAND]
USAGE
  $ Gamicacloud COMMAND
...
```
<!-- usagestop -->

# Gamicacloud Commands

<!-- commands -->
* [`Gamicacloud help [COMMAND]`](#Gamicacloud-help-command)
* [`Gamicacloud init`](#Gamicacloud-init)
* [`Gamicacloud update`](#Gamicacloud-update)
* [`Gamicacloud status`](#Gamicacloud-status)
* [`Gamicacloud client`](#Gamicacloud-client)
* [`Gamicacloud merge`](#Gamicacloud-merge)

## `Gamicacloud help [COMMAND]`

display help for Gamicacloud

```
USAGE
  $ Gamicacloud help [COMMAND]

ARGUMENTS
  COMMAND  command to show help for

OPTIONS
  --all  see all commands in CLI
```

_See code: [@oclif/plugin-help](https://github.com/oclif/plugin-help/blob/v3.2.3/src/commands/help.ts)_

## `Gamicacloud init`

Generates CDK code, mock lambdas, and actual lambdas based on the given schema

```
USAGE
  $ Gamicacloud init

OPTIONS
  -h, --help  show CLI help
```

_See code: [src/commands/init.ts](https://github.com/Gamicacloud/cli/commands/init.ts)_
<!-- commandsstop -->


## `Gamicacloud update`

Update CDK code and mock lambdas based on the given updated schema. This command will not overwrite code in the editiable_src directory.

```
USAGE
  $ Gamicacloud update

OPTIONS
  -h, --help  show CLI help
```

_See code: [src/commands/update.ts](https://github.com/Gamicacloud/cli/src/commands/update.ts)_
<!-- commandsstop -->




## `Gamicacloud client`

Open a API explorer in the browser to query the API.

```
USAGE
  $ Gamicacloud client

OPTIONS
  -h, --help  show CLI help
```

_See code: [src/commands/client.ts](https://github.com/Gamicacloud/cli/src/commands/client.ts)_
<!-- commandsstop -->



## `Gamicacloud merge`

Merges GraphQL schema files.

```
USAGE
  $ Gamicacloud merge

OPTIONS
  -h, --help  show CLI help
```

_See code: [src/commands/update.ts](https://github.com/Gamicacloud/cli/src/commands/merge.ts)_
<!-- commandsstop -->

# Project NPM Commands

Once the project is generated you may run the following npm scripts

<!-- npm commands -->
* `npm run deploy-dev` Deploy Development Stage
* `npm run deploy-prd` Deploy Production Stage
* `npm run destroy-dev` Destroy Development Stage
* `npm run destroy-prd` Destroy Production Stage
* `npm run test-dev` Run Tests for the Development Stage
* `npm run test-prd` Run Tests for the Production Stage


## Details about the Project Generated by the CLI

The CLI will generate a project for Multi-Tenant Serverless API development with [AWS Cloud Development Kit (CDK)](https://docs.aws.amazon.com/cdk/latest/guide/home.html) using TypeScript. It comes with all the necessary code to develop and deploy a Serverless GraphQL API in the AWS Cloud.  This includes the provisioning of cloud infrastructure in code and Serverless stubs where developers may easily include their business logic. The project also provides pre-built mock lambda functions and unit tests to test your deployed APIs. 

The project code should be conceptually divided into two parts:

1. The code that will be generated by the Gamicacloud CLI, and will continuously be updated by the CLI as your API schema evolves. If a developer edits and updated this code, it will be overwritten next time the schema is updated and Gamicacloud CLI update command is given.
2. The code that the developer edits and updates and contains the business logic for the APIs. This code is contained in the `editable_src/` directory. 

It is highly recommended that the developer only edit and update the code contained in the `editable_src/` directory because the rest of the code is generated and updated by the Gamicacloud CLI.

The generated project code includes the mock lambdas contained in the `mock_lambda` directory in the root project folder. Typically, the developer will write business logic in the stub lambdas contained in the `editable_src/lambdas/` directory. The configuration contained in the `editable_src/Gamicacloudconfig.json` file decides which lambda the APIs will call. Therefore, the project may be using mock lambdas in some calls and the real stub lambdas in other calls. This flexibility allows the developer to seamlessly transition from mock APIs towards real APIs, without the API users and testers even noticing it. Also, the mock APIs may be deployed right away.

The API CDK stack (cloud infrastructure in code) is generated by the Gamicacloud CLI `Gamicacloud init` command given the API schema. API development is an iterative process, therefore when the developer updates the API schema in the `editable_src/graphql/schema/` directory and runs the `Gamicacloud update` command the project's CDK code is updated. Given this cycle, most of the CDK stack is generated and updated by the Gamicacloud CLI. However, the developer has the flexibility to add and update the CDK stack by adding and updating visitors in the `editable_src/aspects/` directory. The Gamicacloud framework uses [Aspects](https://docs.aws.amazon.com/cdk/latest/guide/aspects.html) to enhance generated constructs and add cloud constructs written by the API developers.

The `editable_src/` directory contains all the code which the developer edits.  

The `editable_src/lambdas/` directory contains all the lambda stubs where the developer writes the business logic.  

The `editable_src/Gamicacloudconfig.json` file tells the Gamicacloud framework which lambda functions to call.

The `editable_src/aspects` directory contains all the CDK code which the developer adds to the project CDK stack.  

The `cdk.json` file tells the CDK Toolkit how to execute your app.

## The Gamicacloud Dapp and Protocol Complements the CLI

 The [Gamicacloud Dapp](https://www.Gamicacloud.org/) and [protocol](https://github.com/Gamicacloud/protocol) complements this CLI and facilitates the API developer to: 
 
 1. [Tokenize](https://cryptonews.com/news/tokenization-crowdfunding-in-the-era-of-cryptocurrency-and-b-10972.htm) the APIs and raise funding for API development.
 2. Document the developer ownership of the API by issuing you an [NFT](https://ethereum.org/en/nft/).
 3. Market the APIs to the application developers in the API bazaar/store.
 4. Create a decentralized [autonomous organization (DAO)](https://ethereum.org/en/dao/) for the APIs for governance in which the API token holders i.e. developer, investors, and users can participate.
 5. Monitor APIs and do multi-tenant billing and clearing on the Ethereum blockchain using smart contracts. 
 6. Issue tokens to API early adopters and users to incentivize them to subscribe and use the APIs and become a participant in the [Owership Economy](https://variant.fund/writing/the-ownership-economy-crypto-and-consumer-software).
 8. Allow the stakeholders to cash out whenever they require liquidity by selling API tokens.


 ## The Gamicacloud CLI Roadmap

### First Public Release

Release Date: January 1, 2021

Functionality:

1. DynamoDB 
2. Neptune & AuroraDB
3. Microservice dirrective
4. Multiple stacks
5. MockData & MockLambda 
6. Gamicacloud status
7. Gamicacloud client
 
### Second Release

Expected Date: January 25, 2022

Functionality: 

1. API Tests
2. Async Dirrective
3. Nested Resolver 
4. Return Type ( Issues with DynamoDB & Neptune )

### Third Release

Expected Date: Feburary 5, 2022

Functionality: 

Multi-Tenant monetering and billing data live streamed to Amazon Timestream Database deployed in Gamicacloud AWS Account. 

### Fourth Release

Expected Date: March 28, 2022

Functionality: Basic OpenAPI speficication support. 




